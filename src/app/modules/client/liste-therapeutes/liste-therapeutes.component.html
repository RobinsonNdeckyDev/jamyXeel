<div class="container-fluid p-0 opacity-0.1">
    <div class="banner position-relative text-center">
        <img
            src="banner.jpg"
            class="img-fluid w-100"
            alt="Bannière Santé Mentale"
        />
        <div
            class="banner-overlay position-absolute top-50 start-50 translate-middle text-white"
        >
            <h2 class="fw-bold">Votre bien-être mental, notre priorité</h2>
            <p class="lead">
                Trouvez les meilleurs spécialistes pour vous accompagner
            </p>
        </div>
    </div>
</div>

<div class="container-fluid">
    <div class="row">
        <!-- Sidebar -->
        <div class="col-md-3 bg-light py-4">
            <div class="card shadow-sm p-3">
                <h5 class="card-title">Rechercher un spécialiste</h5>

                <!-- Barre de recherche -->
                <div class="mb-3">
                    <input
                        type="text"
                        class="form-control"
                        placeholder="Rechercher un médecin..."
                        [(ngModel)]="searchQuery"
                        (input)="applyFilters()"
                    />
                </div>

                <!-- Filtre par spécialité -->
                <h6 class="mt-3">Spécialité</h6>
                <select
                    class="form-select mb-3"
                    [(ngModel)]="selectedSpecialite"
                    (change)="applyFilters()"
                >
                    <option value="">Toutes les spécialités</option>
                    <option value="psychiatre">Psychiatre</option>
                    <option value="psychologue">Psychologue</option>
                    <option value="neuropsychologue">Neuropsychologue</option>
                    <option value="psychothérapeute">Psychothérapeute</option>
                </select>

                <!-- Filtre par disponibilité -->
                <h6>Disponibilité</h6>
                <div class="form-check">
                    <input
                        class="form-check-input"
                        type="radio"
                        name="disponibilite"
                        [(ngModel)]="selectedDisponibilite"
                        value=""
                        (change)="applyFilters()"
                    />
                    <label class="form-check-label">Tous</label>
                </div>
                <div class="form-check">
                    <input
                        class="form-check-input"
                        type="radio"
                        name="disponibilite"
                        [(ngModel)]="selectedDisponibilite"
                        value="Aujourd'hui"
                        (change)="applyFilters()"
                    />
                    <label class="form-check-label"
                        >Disponible aujourd'hui</label
                    >
                </div>
                <div class="form-check">
                    <input
                        class="form-check-input"
                        type="radio"
                        name="disponibilite"
                        [(ngModel)]="selectedDisponibilite"
                        value="Cette semaine"
                        (change)="applyFilters()"
                    />
                    <label class="form-check-label"
                        >Disponible cette semaine</label
                    >
                </div>

                <!-- Filtre par tarif -->
                <h6 class="mt-3">Tarif (FCFA)</h6>
                <input
                    type="range"
                    class="form-range mb-3"
                    min="0"
                    max="500000"
                    step="10000"
                    [(ngModel)]="maxTarif"
                    (input)="applyFilters()"
                />

                <!-- Bouton de validation -->
                <button class="btn btn-primary w-100" (click)="applyFilters()">
                    Appliquer les filtres
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="col-md-9 py-2" id="specialiste">
            <h2 class="mb-4 mt-2">Liste des spécialistes</h2>
            <div class="row g-4">
                <div class="col-12" *ngFor="let medecin of filteredMedecins">
                    <div
                        class="card h-100 shadow-lg d-flex flex-row align-items-center"
                    >
                        <img
                            [src]="medecin.image"
                            class="rounded-start"
                            alt="Médecin"
                            style="width: 150px; height: auto"
                        />
                        <div class="card-body">
                            <h5 class="card-title">{{ medecin.nom }}</h5>
                            <p class="card-text">{{ medecin.description }}</p>
                            <p class="text-muted mb-2">
                                Disponible :
                                <strong>{{ medecin.disponibilite }}</strong>
                            </p>
                            <p class="text-muted mb-2">
                                Tarif : <strong>{{ medecin.tarif }}FCFA</strong>
                            </p>
                            <div
                                class="d-flex justify-content-between align-items-center"
                            >
                                <div>
                                    <i
                                        *ngFor="
                                            let star of getStarsArray(
                                                medecin.note
                                            );
                                            let i = index
                                        "
                                        class="bi"
                                        [ngClass]="
                                            star
                                                ? 'bi-star-fill text-warning'
                                                : 'bi-star text-secondary'
                                        "
                                    >
                                    </i>
                                </div>
                                <a
                                    [routerLink]="[
                                        '/detailTherapeute',
                                        medecin.id
                                    ]"
                                    class="btn btn-success"
                                    >Voir les détails</a
                                >
                            </div>
                        </div>
                    </div>
                </div>
                <p *ngIf="filteredMedecins.length === 0" class="text-muted">
                    Aucun médecin ne correspond à vos critères.
                </p>
            </div>
        </div>
    </div>
</div>
